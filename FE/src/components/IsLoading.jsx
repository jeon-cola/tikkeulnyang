'use client'

import { motion } from 'framer-motion'
import { useState, useEffect } from 'react'

export default function AnimatedLoading() {
  const [activeIcons, setActiveIcons] = useState([false, false, false, false]);
  
  // 아이콘 순환 애니메이션 로직
  useEffect(() => {
    // 아이콘을 순차적으로 활성화했다가 비활성화하는 함수
    const animateIcons = () => {
      // 모든 아이콘 초기화
      setActiveIcons([false, false, false, false]);
      
      // 순차적으로 아이콘 활성화
      setTimeout(() => setActiveIcons([true, false, false, false]), 0);
      setTimeout(() => setActiveIcons([true, true, false, false]), 300);
      setTimeout(() => setActiveIcons([true, true, true, false]), 600);
      setTimeout(() => setActiveIcons([true, true, true, true]), 900);
      
      // 역순으로 아이콘 비활성화
      setTimeout(() => setActiveIcons([false, true, true, true]), 1200);
      setTimeout(() => setActiveIcons([false, false, true, true]), 1500);
      setTimeout(() => setActiveIcons([false, false, false, true]), 1800);
      setTimeout(() => setActiveIcons([false, false, false, false]), 2100);
    };

    // 초기 실행
    animateIcons();
    
    // 지속적인 애니메이션을 위한 인터벌 설정
    const interval = setInterval(animateIcons, 2400);
    
    return () => clearInterval(interval);
  }, []);

  // 아이콘 컴포넌트
  const iconComponents = [
    // 돼지 아이콘
    <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M14.25 2.20017e-07C15.7247 -0.000368739 17.1589 0.463318 18.3334 1.32017C19.5079 2.17703 20.3581 3.3799 20.754 4.7449L20.832 5.04038L23.637 4.36727C23.842 4.31823 24.0555 4.31137 24.2635 4.34713C24.4715 4.38288 24.6692 4.46045 24.8438 4.57475C25.0185 4.68906 25.166 4.83752 25.2767 5.01041C25.3875 5.1833 25.459 5.37672 25.4865 5.578L25.5 5.76537V8.37421C26.3461 9.15294 27.0392 10.0718 27.546 11.0868L27.753 11.5307H28.5C28.8674 11.5308 29.222 11.6604 29.4966 11.895C29.7711 12.1296 29.9465 12.4528 29.9895 12.8035L30 12.9721V17.2961C30 17.5334 29.9391 17.7669 29.8227 17.9761C29.7062 18.1853 29.5379 18.3637 29.3325 18.4953L29.1705 18.5847L27.4185 19.4279C26.7025 20.762 25.6633 21.9113 24.3885 22.779L24 23.0298V24.5028C24 24.8559 23.8651 25.1966 23.6209 25.4604C23.3768 25.7242 23.0404 25.8928 22.6755 25.9341L22.5 25.9442H18C17.6326 25.9441 17.278 25.8145 17.0034 25.5799C16.7289 25.3453 16.5535 25.0221 16.5105 24.6715L16.5 24.5028H15C15 24.8559 14.8651 25.1966 14.6209 25.4604C14.3768 25.7242 14.0404 25.8928 13.6755 25.9341L13.5 25.9442H9C8.6326 25.9441 8.27799 25.8145 8.00344 25.5799C7.72889 25.3453 7.55349 25.0221 7.5105 24.6715L7.5 24.5028V23.0298C6.41594 22.3646 5.47957 21.4998 4.74484 20.4853C4.01011 19.4709 3.49153 18.3267 3.219 17.1188C2.33427 16.8662 1.55177 16.3584 0.977562 15.664C0.403357 14.9697 0.065224 14.1225 0.00900006 13.2373L0 12.9721V12.2514C0.000424061 11.884 0.146819 11.5307 0.409273 11.2636C0.671726 10.9964 1.03043 10.8357 1.41209 10.8142C1.79375 10.7926 2.16957 10.9119 2.46275 11.1477C2.75593 11.3835 2.94434 11.718 2.9895 12.0828L3 12.2514V12.9721C3.002 13.1873 3.047 13.3867 3.135 13.5702C3.36359 12.2725 3.87419 11.0356 4.63352 9.94016C5.39285 8.84472 6.38387 7.9153 7.542 7.21248C7.43557 6.30513 7.52972 5.38642 7.81828 4.51644C8.10684 3.64647 8.58331 2.84484 9.21652 2.16401C9.84973 1.48318 10.6254 0.938489 11.4928 0.565577C12.3602 0.192666 13.2997 -6.33051e-05 14.25 2.20017e-07ZM22.5 7.61029L18.363 8.60482L18.183 8.63797L18 8.64806H12.75C11.2333 8.6471 9.76047 9.13699 8.56898 10.0387C7.37748 10.9405 6.53677 12.2016 6.18239 13.6186C5.82801 15.0357 5.98061 16.5261 6.6156 17.8496C7.25059 19.1731 8.33096 20.2526 9.6825 20.9139C9.90026 21.0209 10.0875 21.1774 10.2279 21.3698C10.3683 21.5623 10.4576 21.7848 10.488 22.018L10.5 22.1967V23.0615H12C12 22.7085 12.1349 22.3677 12.3791 22.1039C12.6232 21.8401 12.9596 21.6715 13.3245 21.6302L13.5 21.6201H18C18.3674 21.6202 18.722 21.7498 18.9966 21.9844C19.2711 22.219 19.4465 22.5422 19.4895 22.8929L19.5 23.0615H21V22.1967C21.0001 21.9313 21.0765 21.671 21.2208 21.4447C21.365 21.2183 21.5715 21.0347 21.8175 20.9139C23.1942 20.2371 24.2887 19.1284 24.9195 17.7718C25.0321 17.5292 25.2122 17.3212 25.44 17.1707L25.6185 17.0698L27 16.4054V14.4134H26.6895C26.3629 14.4133 26.0452 14.3108 25.7848 14.1214C25.5243 13.932 25.3353 13.6661 25.2465 13.3641C24.8716 12.096 24.1035 10.9678 23.0445 10.1298C22.7508 9.89657 22.5604 9.5647 22.512 9.20154L22.5 9.01849V7.61029ZM21 11.5307C21.3978 11.5307 21.7794 11.6826 22.0607 11.9529C22.342 12.2232 22.5 12.5898 22.5 12.9721C22.5 13.3544 22.342 13.721 22.0607 13.9913C21.7794 14.2616 21.3978 14.4134 21 14.4134C20.6022 14.4134 20.2206 14.2616 19.9393 13.9913C19.658 13.721 19.5 13.3544 19.5 12.9721C19.5 12.5898 19.658 12.2232 19.9393 11.9529C20.2206 11.6826 20.6022 11.5307 21 11.5307ZM14.25 2.88269C13.3414 2.88268 12.4638 3.19964 11.7801 3.77465C11.0964 4.34966 10.6533 5.14361 10.533 6.00896C11.2599 5.84651 12.0037 5.76477 12.75 5.76537H17.8155L17.9205 5.74087C17.7426 4.93222 17.2808 4.2069 16.6126 3.68653C15.9443 3.16615 15.1102 2.88234 14.25 2.88269Z" fill="white"/>
    </svg>,

    
    // 은행 아이콘
    <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M2.5 10V15.0013H3.75V22.5H2.5V26.25H22.5L26.25 26.2512L27.5 26.25V22.5H26.25V15.0013H27.5V10L15 2.5L2.5 10ZM7.5 22.5V15.0013H10V22.5H7.5ZM13.75 22.5V15.0013H16.25V22.5H13.75ZM22.5 22.5H20V15.0013H22.5V22.5ZM17.5 10C17.4999 10.3284 17.4352 10.6535 17.3094 10.9569C17.1837 11.2603 16.9994 11.5359 16.7671 11.768C16.5349 12.0002 16.2592 12.1843 15.9557 12.3099C15.6523 12.4355 15.3271 12.5001 14.9987 12.5C14.6704 12.4999 14.3452 12.4352 14.0418 12.3094C13.7385 12.1837 13.4629 11.9994 13.2307 11.7671C12.9986 11.5349 12.8145 11.2592 12.6889 10.9557C12.5633 10.6523 12.4987 10.3271 12.4987 9.99875C12.4989 9.33554 12.7625 8.69957 13.2316 8.23072C13.7007 7.76188 14.3368 7.49858 15 7.49875C15.6632 7.49892 16.2992 7.76253 16.768 8.23161C17.2369 8.70068 17.5002 9.33679 17.5 10Z" fill="white"/>
    </svg>
    ,
    
    // 동전 아이콘
    <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M22.5 2.00982C24.7803 3.32635 26.6739 5.21992 27.9904 7.50021C29.3069 9.7805 30 12.3672 30 15.0002C30 17.6333 29.3069 20.2199 27.9903 22.5002C26.6738 24.7805 24.7802 26.674 22.4998 27.9905C20.2195 29.307 17.6328 30 14.9998 30C12.3667 30 9.78003 29.3068 7.49975 27.9903C5.21948 26.6737 3.32593 24.7801 2.00945 22.4998C0.69297 20.2194 -6.68845e-05 17.6328 4.84148e-09 14.9997L0.00750018 14.5137C0.0915048 11.9232 0.845322 9.39871 2.19546 7.18628C3.5456 4.97384 5.44598 3.14899 7.71134 1.88965C9.9767 0.630303 12.5297 -0.020566 15.1215 0.000495365C17.7133 0.0215568 20.2554 0.71383 22.5 2.00982ZM15 5.99979C14.6022 5.99979 14.2206 6.15783 13.9393 6.43913C13.658 6.72043 13.5 7.10196 13.5 7.49978C12.3065 7.49978 11.1619 7.97389 10.318 8.81779C9.4741 9.6617 9 10.8063 9 11.9998C9 13.1932 9.4741 14.3378 10.318 15.1817C11.1619 16.0256 12.3065 16.4997 13.5 16.4997V19.4997C13.2512 19.5135 13.0029 19.4663 12.7765 19.3622C12.5501 19.2582 12.3525 19.1005 12.201 18.9027L12.099 18.7512C11.8938 18.4202 11.5679 18.182 11.1902 18.087C10.8125 17.992 10.4127 18.0476 10.0753 18.242C9.73787 18.4364 9.48928 18.7545 9.38211 19.1289C9.27493 19.5033 9.31757 19.9047 9.501 20.2482C9.88386 20.9122 10.43 21.4674 11.0876 21.8611C11.7451 22.2549 12.4924 22.4742 13.2585 22.4982H13.5C13.4997 22.8658 13.6344 23.2208 13.8786 23.4957C14.1227 23.7705 14.4594 23.9461 14.8245 23.9892L15 23.9997C15.3978 23.9997 15.7794 23.8416 16.0607 23.5603C16.342 23.279 16.5 22.8975 16.5 22.4997L16.764 22.4922C17.9334 22.4246 19.0304 21.9037 19.8218 21.0401C20.6132 20.1766 21.0368 19.0385 21.0024 17.8677C20.968 16.6968 20.4785 15.5855 19.6377 14.7699C18.797 13.9543 17.6714 13.4986 16.5 13.4997V10.4998C17.037 10.4818 17.5065 10.7098 17.799 11.0968L17.901 11.2483C18.1062 11.5792 18.4321 11.8174 18.8098 11.9124C19.1875 12.0075 19.5873 11.9519 19.9247 11.7575C20.2621 11.563 20.5107 11.245 20.6179 10.8706C20.7251 10.4962 20.6824 10.0948 20.499 9.75127C20.1163 9.087 19.5703 8.5315 18.9127 8.13747C18.2551 7.74344 17.5077 7.52394 16.7415 7.49978H16.5C16.5 7.10196 16.342 6.72043 16.0607 6.43913C15.7794 6.15783 15.3978 5.99979 15 5.99979ZM16.5 16.4997C16.8978 16.4997 17.2794 16.6578 17.5607 16.9391C17.842 17.2204 18 17.6019 18 17.9997C18 18.3975 17.842 18.7791 17.5607 19.0604C17.2794 19.3417 16.8978 19.4997 16.5 19.4997V16.4997ZM13.5 10.4998V13.4997C13.1022 13.4997 12.7206 13.3417 12.4393 13.0604C12.158 12.7791 12 12.3976 12 11.9998C12 11.6019 12.158 11.2204 12.4393 10.9391C12.7206 10.6578 13.1022 10.4998 13.5 10.4998Z" fill="white"/>
    </svg>
    ,
    
    // 수납장 아이콘
    <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
    <mask id="mask0_2222_1288" style={{masktype:"luminance"}} maskUnits="userSpaceOnUse" x="3" y="2" width="24" height="26">
      <path d="M26.25 2.5H3.75V8.75H26.25V2.5ZM26.25 11.875H3.75V18.125H26.25V11.875ZM26.25 21.25H3.75V27.5H26.25V21.25Z" fill="white" stroke="white" stroke-linejoin="round"/>
      <path d="M13.125 5.625H16.875M13.125 15H16.875M13.125 24.375H16.875" stroke="black" stroke-linecap="round"/>
      </mask>
      <g mask="url(#mask0_2222_1288)">
      <path d="M0 0H30V30H0V0Z" fill="white"/>
      </g>
    </svg>
  ];

  return (
    <div className="fixed inset-0 z-10 bg-[#666666]/40 flex items-center justify-center h-screen flex-col gap-3">
      <div className="flex flex-row gap-3">
        {activeIcons.map((isActive, index) => (
          <motion.div
            key={index}
            className="w-[42px] h-[42px] rounded-full bg-[#ff957a] flex justify-center items-center"
            initial={{ scale: 0, opacity: 0 }}
            animate={{ 
              scale: isActive ? 1 : 0,
              opacity: isActive ? 1 : 0
            }}
            transition={{ 
              duration: 0.2,
              ease: "easeInOut"
            }}
          >
            {iconComponents[index]}
          </motion.div>
        ))}
      </div>
      <p className='text-2xl text-white'>로딩중...</p>
    </div>
  );
}
